<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Free Spin Futuristik Neon</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');

        :root {
            --gold: #ffd700;
            --green: #2ecc71;
            --cyan: #00ffff;
            --orange: #ff9933;
        }

        body {
            margin: 0;
            font-family: 'Poppins', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
            background: url('https://cdn.areabermain.club/assets/cdn/az5/2025/12/05/20251205/39f0a5141c4b92a2afc481db05d596c7/screenshot-8.png') no-repeat center center fixed;
            background-size: cover;
            position: relative;
            color: var(--green);
        }

        canvas#particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
        }

        .container {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(12px);
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 700px;
            margin-bottom: 40px;
            position: relative;
            z-index: 1;
            box-shadow: 0 0 25px rgba(0, 255, 200, 0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .header img {
            width: 100px;
            margin-bottom: 10px;
            filter: drop-shadow(0 0 15px rgba(215, 80, 0, 0.6));
        }
        
        .header h1 {
            margin: 0 0 10px 0;
            color: var(--gold);
        }

        select, textarea, input {
            width: 100%;
            padding: 12px;
            margin-bottom: 15px;
            border-radius: 10px;
            border: 1px solid var(--cyan);
            background: #051515;
            color: var(--green);
            font-size: 14px;
            outline: none;
        }

        select:focus, textarea:focus, input:focus {
            box-shadow: 0 0 15px var(--cyan);
        }

        .btn-reset {
            padding: 10px 15px;
            border-radius: 10px;
            border: none;
            cursor: pointer;
            transition: 0.3s;
            font-weight: bold;
            background: linear-gradient(90deg, #b8860b, var(--gold));
            color: #000;
            margin-bottom: 15px;
        }
        
        .btn-reset:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px var(--gold);
        }

        #hasil, #hasilMode {
            font-size: 20px;
            color: var(--green);
            text-align: center;
            margin-top: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            text-align: right;
        }

        table th, table td {
            padding: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        table th {
            background: rgba(100, 75, 55, 0.2);
            color: var(--gold);
        }

        table td {
            background: rgba(44, 44, 44, 0.7);
            color: var(--green);
        }
        
        table tr:nth-child(even) td {
            background: rgba(55, 55, 55, 0.7);
        }
        
        table tr:hover td {
            background: rgba(21, 75, 55, 0.2);
        }
    </style>
</head>
<body>

<canvas id="particles"></canvas>

<div class="container">
    <div class="header">
        <img src="https://cdn.areabermain.club/assets/cdn/az9/2025/03/16/20250316/2e12a24bec2cf44d09587a1adcf092c9/bosjoko-promo-new.jpg" alt="Logo">
        <h1>FREE SPIN & BUY SPIN</h1>
    </div>

    <!-- MENU PILIHAN MODE -->
    <select id="modeHitung">
        <option value="freespin">Free Spin (20%)</option>
        <option value="buyspin">Buy Spin (Potong modal + 25%)</option>
    </select>

    <!-- INPUT MODAL KHUSUS BUY SPIN -->
    <input type="text" id="modalBuy" placeholder="Masukkan Modal Buyspin" style="display:none;">

    <textarea id="inputData" placeholder="Masukkan data Free Spin..."></textarea>
    <button class="btn-reset" onclick="resetData()">â™» Hapus Data</button>

    <h2 id="hasil">Total Awal: IDR 0,000</h2>
    <h2 id="hasilMode">Hasil Mode: IDR 0,000</h2>

    <table id="previewTable" style="display:none;">
        <thead>
            <tr>
                <th>Spin</th>
                <th>Jumlah (IDR)</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script>
function formatCustom(num) {
    let parts = num.toFixed(2).split(".");
    let integer = parts[0];
    let decimal = parts[1] + "0";
    let ribuan = integer.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    return ribuan + "," + decimal;
}

const inputData = document.getElementById("inputData");
const hasil = document.getElementById("hasil");
const hasilMode = document.getElementById("hasilMode");
const previewTable = document.getElementById("previewTable");
const tbody = previewTable.querySelector("tbody");
const modeHitung = document.getElementById("modeHitung");
const modalBuy = document.getElementById("modalBuy");

let prevTotal = 0;

modeHitung.addEventListener("change", () => {
    modalBuy.style.display = modeHitung.value === "buyspin" ? "block" : "none";
    hitung();
});

inputData.addEventListener("input", hitung);
modalBuy.addEventListener("input", hitung);

function animateNumber(finalValue, element, prefixText) {
    let current = 0;
    const step = finalValue / 40;
    const interval = setInterval(() => {
        current += step;
        if (current >= finalValue) { 
            current = finalValue; 
            clearInterval(interval);
        }
        element.innerText = prefixText + formatCustom(current);
    }, 10);
}

function hitung() {
    let data = inputData.value;
    let regex = /Free Spin:\s*(\d+)\/\d+\s*[\r\n]+IDR\s*([\d,.]+)/g;
    let match;
    let total = 0;

    tbody.innerHTML = "";

    while ((match = regex.exec(data)) !== null) {
        let spin = match[1];
        let angka = match[2].replace(/\./g, "").replace(",", "."); // Mengganti titik desimal dengan koma

        let nilai = parseFloat(angka);
        total += nilai;

        let row = document.createElement("tr");
        row.innerHTML = `<td style="text-align:center;">${spin}</td><td>IDR ${formatCustom(nilai)}</td>`;
        tbody.appendChild(row);
    }

    previewTable.style.display = tbody.children.length > 0 ? "table" : "none";

    // Tampilkan total awal
    animateNumber(total, hasil, "Total Awal: IDR ");

    // =========================
    // PROSES MODE BUY/FREESPIN
    // =========================
    let final = 0;

    if (modeHitung.value === "freespin") {
        final = total * 0.20; // 20%
    } else {
        // Memproses input modal dengan mengganti titik dengan "" untuk ribuan, dan "," menjadi "."
        let modal = parseFloat(modalBuy.value.replace(/\./g, "").replace(",", ".")) || 0; 
        let setelahPotong = total - modal; 
        final = setelahPotong * 0.25; // 25%
    }

    animateNumber(final, hasilMode, "Hasil Mode: IDR ");
    prevTotal = final;
}

function resetData() {
    inputData.value = "";
    modalBuy.value = "";
    hasil.innerText = "Total Awal: IDR 0,000";
    hasilMode.innerText = "Hasil Mode: IDR 0,000";
    tbody.innerHTML = "";
    previewTable.style.display = "none";
    prevTotal = 0;
}

/* ================= PARTIKEL ================= */
const canvas = document.getElementById("particles");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const particles = [];
for (let i = 0; i < 120; i++) {
    particles.push({
        x: Math.random() * canvas.width,
        y: Math.random() * canvas.height,
        r: Math.random() * 2 + 1,
        dx: (Math.random() - 0.5) * 0.5,
        dy: (Math.random() - 0.5) * 0.5,
        color: i % 3 === 0 ? "#2ecc71" : i % 3 === 1 ? "#00ffff" : "#ffd700"
    });
}

function animateParticles() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    for (let i = 0; i < particles.length; i++) {
        let p = particles[i];
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        ctx.fillStyle = p.color;
        ctx.fill();

        p.x += p.dx;
        p.y += p.dy;

        if (p.x > canvas.width + 50 || p.x < -50 || p.y > canvas.height + 50 || p.y < -50) {
            particles.splice(i, 1); 
            i--;
        }
    }
    requestAnimationFrame(animateParticles);
}
animateParticles();
</script>
</body>
</html>